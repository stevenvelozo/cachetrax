"use strict";function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,r=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Cachetrax=e()}}((function(){return function e(t,i,r){function n(s,a){if(!i[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=i[s]={exports:{}};t[s][0].call(f.exports,(function(e){return n(t[s][1][e]||e)}),f,f.exports,e,t,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,i){var r=function(){function e(t,i){_classCallCheck(this,e),this.fable=!1,this.options="object"===_typeof(t)?t:{},this.serviceType="Unknown",this.UUID="CORESVC-".concat(Math.floor(89999*Math.random()+1e4)),this.Hash="string"==typeof i?i:"".concat(this.UUID)}return _createClass(e,[{key:"connectFable",value:function(e){return this.fable=e,!0}}]),e}();_defineProperty(r,"isFableService",!0),t.exports=r},{}],2:[function(e,t,i){var r=_createClass((function e(t,i,r){_classCallCheck(this,e),this.fable=t,this.options="object"===_typeof(i)?i:"object"!==_typeof(t)||t.isFable?{}:t,this.serviceType="Unknown","function"==typeof t.getUUID?this.UUID=t.getUUID():this.UUID="NoFABLESVC-".concat(Math.floor(89999*Math.random()+1e4)),this.Hash="string"==typeof r?r:"".concat(this.UUID),this.log=this.fable.log,this.servicesMap=this.fable.serviceMap,this.services=this.fable.services}));_defineProperty(r,"isFableService",!0),t.exports=r,t.exports.CoreServiceProviderBase=e("./Fable-ServiceProviderBase-Preinit.js")},{"./Fable-ServiceProviderBase-Preinit.js":1}],3:[function(e,t,i){var r=e("fable-serviceproviderbase"),n=e("./LinkedList.js"),o=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,r,o){var s;return _classCallCheck(this,i),(s=void 0===e?t.call(this,{}):t.call(this,e,r,o)).serviceType="ObjectCache",s._HashMap={},s._RecordMap={},s._List=new n,s.maxLength=0,s.maxAge=0,_possibleConstructorReturn(s)}return _createClass(i,[{key:"RecordMap",get:function(){return this._RecordMap}},{key:"put",value:function(e,t){if(this._HashMap.hasOwnProperty(t))return this._HashMap[t].Datum=e,this._RecordMap[t]=e,this._HashMap[t].Datum;var i=this._List.push(e,t);return this._HashMap[i.Hash]=i,this._RecordMap[t]=e,this.maxLength>0&&this._List.length>this.maxLength&&(i=this._List.pop(),delete this._RecordMap[i.Hash],delete this._HashMap[i.Hash]),i.Metadata.Created=+new Date,i.Datum}},{key:"read",value:function(e){return!!this._HashMap.hasOwnProperty(e)&&this._HashMap[e].Datum}},{key:"touch",value:function(e){if(!this._HashMap.hasOwnProperty(e))return!1;var t=this._List.remove(this._HashMap[e]);return delete this._RecordMap[e],delete this._HashMap[e],this.put(t.Datum,t.Hash)}},{key:"expire",value:function(e){if(!this._HashMap.hasOwnProperty(e))return!1;var t=this._HashMap[e];return t=this._List.remove(t),delete this._RecordMap[t.Hash],delete this._HashMap[t.Hash],t}},{key:"pruneBasedOnExpiration",value:function(e,t){var i=void 0===t?[]:t;if(this.maxAge<1)return e(i);for(var r=+new Date,n=Object.keys(this._HashMap),o=0;o<n.length;o++)r-this._HashMap[n[o]].Metadata.Created>=this.maxAge&&i.push(this.expire(n[o]));e(i)}},{key:"pruneBasedOnLength",value:function(e,t){var i=void 0===t?[]:t;if(this.maxLength>0)for(;this._List.length>this.maxLength;)i.push(this._List.pop());return e(i)}},{key:"pruneCustom",value:function(e,t,i){for(var r=void 0===i?[]:i,n=Object.keys(this._HashMap),o=0;o<n.length;o++){var s=this._HashMap[n[o]];t(s.Datum,s.Hash,s)&&r.push(this.expire(n[o]))}e(r)}},{key:"prune",value:function(e){var t=this,i=[];if(this._List.length<1)return e(i);this.pruneBasedOnExpiration((function(r){t.pruneBasedOnLength(e,i)}),i)}},{key:"getNode",value:function(e){return!!this._HashMap.hasOwnProperty(e)&&this._HashMap[e]}}]),i}(r);t.exports=o},{"./LinkedList.js":5,"fable-serviceproviderbase":2}],4:[function(e,t,i){var r=_createClass((function e(){_classCallCheck(this,e),this.Hash=!1,this.Datum=!1,this.Metadata={},this.LeftNode=!1,this.RightNode=!1,this.__ISNODE=!0}));t.exports=r},{}],5:[function(e,t,i){var r=e("./LinkedList-Node.js"),n=function(){function e(){_classCallCheck(this,e),this.totalNodes=0,this.length=0,this.head=!1,this.tail=!1}return _createClass(e,[{key:"initializeNode",value:function(e,t){if(void 0===e)return!1;this.totalNodes++;var i=void 0!==t?t:"NODE[".concat(this.totalNodes,"]"),n=new r;return n.Hash=i,n.Datum=e,n}},{key:"append",value:function(e,t){var i=this.initializeNode(e,t);return!!i&&(this.length++,1==this.length?(this.head=i,this.tail=i,i):(this.tail.RightNode=i,i.LeftNode=this.tail,this.tail=i,i))}},{key:"push",value:function(e,t){return this.append(e,t)}},{key:"prepend",value:function(e,t){var i=this.initializeNode(e,t);return!!i&&(this.length++,1==this.length?(this.head=i,this.tail=i,i):(this.head.LeftNode=i,i.RightNode=this.head,this.head=i,i))}},{key:"remove",value:function(e){return void 0!==e&&(!!e.__ISNODE&&(this.length--,this.length<1?(this.head=!1,this.tail=!1,e):e.LeftNode&&e.RightNode?(e.LeftNode.RightNode=e.RightNode,e.RightNode.LeftNode=e.LeftNode,e.RightNode=!1,e.LeftNode=!1,e):e.LeftNode?(e.LeftNode.RightNode=!1,this.tail=e.LeftNode,e.LeftNode=!1,e):(e.RightNode.LeftNode=!1,this.head=e.RightNode,e.RightNode=!1,e)))}},{key:"pop",value:function(){return this.remove(this.head)}},{key:"each",value:function(e,t){var i=this;if(this.length<1)return t();var r=!1;return function n(o){if(o)return t(o);if(r){if(!r.RightNode)return t();r=r.RightNode}else r=i.head;e(r.Datum,r.Hash,n)}()}},{key:"seek",value:function(e){if(!e)return!1;if(this.length<1)return!1;if(e>=this.length)return!1;for(var t=this.head,i=0;i<e;i++)t=t.RightNode;return t}}]),e}();t.exports=n},{"./LinkedList-Node.js":4}]},{},[3])(3)}));
//# sourceMappingURL=cachetrax.compatible.min.js.map

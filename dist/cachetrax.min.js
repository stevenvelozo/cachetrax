"use strict";function _defineProperty(t,e,i){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==typeof e?e:String(e)}function _toPrimitive(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).CacheTrax=t()}}((function(){return function t(e,i,s){function r(o,n){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!n&&a)return a(o,!0);if(h)return h(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[o]={exports:{}};e[o][0].call(u.exports,(function(t){return r(e[o][1][t]||t)}),u,u.exports,t,e,i,s)}return i[o].exports}for(var h="function"==typeof require&&require,o=0;o<s.length;o++)r(s[o]);return r}({1:[function(t,e,i){class s{constructor(t,e){this.fable=!1,this.options="object"==typeof t?t:{},this.serviceType="Unknown",this.UUID="CORESVC-".concat(Math.floor(89999*Math.random()+1e4)),this.Hash="string"==typeof e?e:"".concat(this.UUID)}connectFable(t){return this.fable=t,!0}}_defineProperty(s,"isFableService",!0),e.exports=s},{}],2:[function(t,e,i){class s{constructor(t,e,i){this.fable=t,this.options="object"==typeof e?e:"object"!=typeof t||t.isFable?{}:t,this.serviceType="Unknown","function"==typeof t.getUUID?this.UUID=t.getUUID():this.UUID="NoFABLESVC-".concat(Math.floor(89999*Math.random()+1e4)),this.Hash="string"==typeof i?i:"".concat(this.UUID)}}_defineProperty(s,"isFableService",!0),e.exports=s,e.exports.CoreServiceProviderBase=t("./Fable-ServiceProviderBase-Preinit.js")},{"./Fable-ServiceProviderBase-Preinit.js":1}],3:[function(t,e,i){var s=t("./CacheTrax.js");"object"!=typeof window||window.hasOwnProperty("CacheTrax")||(window.CacheTrax=s),e.exports=s},{"./CacheTrax.js":4}],4:[function(t,e,i){const s=t("fable-serviceproviderbase"),r=t("./LinkedList.js");e.exports=class extends s{constructor(t,e,i){void 0===t?super({}):super(t,e,i),this.serviceType="ObjectCache",this._HashMap={},this._List=new r,this.maxLength=0,this.maxAge=0}put(t,e){if(this._HashMap.hasOwnProperty(e))return this._HashMap[e].Datum=t,this._HashMap[e].Datum;let i=this._List.push(t,e);return this._HashMap[i.Hash]=i,this.maxLength>0&&this._List.length>this.maxLength&&(i=this._List.pop(),delete this._HashMap[i.Hash]),i.Metadata.Created=+new Date,i.Datum}touch(t){if(!this._HashMap.hasOwnProperty(t))return!1;let e=this._List.remove(this._HashMap[t]);return delete this._HashMap[t],this.put(e.Datum,e.Hash)}expire(t){if(!this._HashMap.hasOwnProperty(t))return!1;let e=this._HashMap[t];return e=this._List.remove(e),delete this._HashMap[e.Hash],e}pruneBasedOnExpiration(t,e){let i=void 0===e?[]:e;if(this.maxAge<1)return t(i);let s=+new Date,r=Object.keys(this._HashMap);for(let t=0;t<r.length;t++)s-this._HashMap[r[t]].Metadata.Created>=this.maxAge&&i.push(this.expire(r[t]));t(i)}pruneBasedOnLength(t,e){let i=void 0===e?[]:e;if(this.maxLength>0)for(;this._List.length>this.maxLength;)i.push(this._List.pop());return t(i)}pruneCustom(t,e,i){let s=void 0===i?[]:i,r=Object.keys(this._HashMap);for(let t=0;t<r.length;t++){let i=this._HashMap[r[t]];e(i.Datum,i.Hash,i)&&s.push(this.expire(r[t]))}t(s)}prune(t){let e=[];if(this._List.length<1)return t(e);this.pruneBasedOnExpiration((i=>{this.pruneBasedOnLength(t,e)}),e)}read(t){return!!this._HashMap.hasOwnProperty(t)&&this._HashMap[t].Datum}getNode(t){return!!this._HashMap.hasOwnProperty(t)&&this._HashMap[t]}}},{"./LinkedList.js":6,"fable-serviceproviderbase":2}],5:[function(t,e,i){e.exports=class{constructor(){this.Hash=!1,this.Datum=!1,this.Metadata={},this.LeftNode=!1,this.RightNode=!1,this.__ISNODE=!0}}},{}],6:[function(t,e,i){const s=t("./LinkedList-Node.js");e.exports=class{constructor(){this.totalNodes=0,this.length=0,this.head=!1,this.tail=!1}initializeNode(t,e){if(void 0===t)return!1;this.totalNodes++;let i=void 0!==e?e:"NODE[".concat(this.totalNodes,"]"),r=new s;return r.Hash=i,r.Datum=t,r}append(t,e){let i=this.initializeNode(t,e);return!!i&&(this.length++,1==this.length?(this.head=i,this.tail=i,i):(this.tail.RightNode=i,i.LeftNode=this.tail,this.tail=i,i))}push(t,e){return this.append(t,e)}prepend(t,e){let i=this.initializeNode(t,e);return!!i&&(this.length++,1==this.length?(this.head=i,this.tail=i,i):(this.head.LeftNode=i,i.RightNode=this.head,this.head=i,i))}remove(t){return void 0!==t&&(!!t.__ISNODE&&(this.length--,this.length<1?(this.head=!1,this.tail=!1,t):t.LeftNode&&t.RightNode?(t.LeftNode.RightNode=t.RightNode,t.RightNode.LeftNode=t.LeftNode,t.RightNode=!1,t.LeftNode=!1,t):t.LeftNode?(t.LeftNode.RightNode=!1,this.tail=t.LeftNode,t.LeftNode=!1,t):(t.RightNode.LeftNode=!1,this.head=t.RightNode,t.RightNode=!1,t)))}pop(){return this.remove(this.head)}each(t,e){if(this.length<1)return e();let i=!1,s=r=>{if(r)return e(r);if(i){if(!i.RightNode)return e();i=i.RightNode}else i=this.head;t(i.Datum,i.Hash,s)};return s()}seek(t){if(!t)return!1;if(this.length<1)return!1;if(t>=this.length)return!1;let e=this.head;for(let i=0;i<t;i++)e=e.RightNode;return e}}},{"./LinkedList-Node.js":5}]},{},[3])(3)}));
//# sourceMappingURL=cachetrax.min.js.map

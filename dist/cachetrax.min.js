"use strict";function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Cachetrax=e()}}((function(){return function e(t,i,s){function r(o,a){if(!i[o]){if(!t[o]){var n="function"==typeof require&&require;if(!a&&n)return n(o,!0);if(h)return h(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var p=i[o]={exports:{}};t[o][0].call(p.exports,(function(e){return r(t[o][1][e]||e)}),p,p.exports,e,t,i,s)}return i[o].exports}for(var h="function"==typeof require&&require,o=0;o<s.length;o++)r(s[o]);return r}({1:[function(e,t,i){class s{constructor(e,t){this.fable=!1,this.options="object"==typeof e?e:{},this.serviceType="Unknown",this.UUID="CORESVC-".concat(Math.floor(89999*Math.random()+1e4)),this.Hash="string"==typeof t?t:"".concat(this.UUID)}connectFable(e){return this.fable=e,!0}}_defineProperty(s,"isFableService",!0),t.exports=s},{}],2:[function(e,t,i){class s{constructor(e,t,i){this.fable=e,this.options="object"==typeof t?t:"object"!=typeof e||e.isFable?{}:e,this.serviceType="Unknown","function"==typeof e.getUUID?this.UUID=e.getUUID():this.UUID="NoFABLESVC-".concat(Math.floor(89999*Math.random()+1e4)),this.Hash="string"==typeof i?i:"".concat(this.UUID),this.log=this.fable.log,this.servicesMap=this.fable.serviceMap,this.services=this.fable.services}}_defineProperty(s,"isFableService",!0),t.exports=s,t.exports.CoreServiceProviderBase=e("./Fable-ServiceProviderBase-Preinit.js")},{"./Fable-ServiceProviderBase-Preinit.js":1}],3:[function(e,t,i){const s=e("fable-serviceproviderbase"),r=e("./LinkedList.js");t.exports=class extends s{constructor(e,t,i){void 0===e?super({}):super(e,t,i),this.serviceType="ObjectCache",this._HashMap={},this._RecordMap={},this._List=new r,this.maxLength=0,this.maxAge=0}get RecordMap(){return this._RecordMap}put(e,t){if(this._HashMap.hasOwnProperty(t))return this._HashMap[t].Datum=e,this._RecordMap[t]=e,this._HashMap[t].Datum;let i=this._List.push(e,t);return this._HashMap[i.Hash]=i,this._RecordMap[t]=e,this.maxLength>0&&this._List.length>this.maxLength&&(i=this._List.pop(),delete this._RecordMap[i.Hash],delete this._HashMap[i.Hash]),i.Metadata.Created=+new Date,i.Datum}read(e){return!!this._HashMap.hasOwnProperty(e)&&this._HashMap[e].Datum}touch(e){if(!this._HashMap.hasOwnProperty(e))return!1;let t=this._List.remove(this._HashMap[e]);return delete this._RecordMap[e],delete this._HashMap[e],this.put(t.Datum,t.Hash)}expire(e){if(!this._HashMap.hasOwnProperty(e))return!1;let t=this._HashMap[e];return t=this._List.remove(t),delete this._RecordMap[t.Hash],delete this._HashMap[t.Hash],t}pruneBasedOnExpiration(e,t){let i=void 0===t?[]:t;if(this.maxAge<1)return e(i);let s=+new Date,r=Object.keys(this._HashMap);for(let e=0;e<r.length;e++)s-this._HashMap[r[e]].Metadata.Created>=this.maxAge&&i.push(this.expire(r[e]));e(i)}pruneBasedOnLength(e,t){let i=void 0===t?[]:t;if(this.maxLength>0)for(;this._List.length>this.maxLength;)i.push(this._List.pop());return e(i)}pruneCustom(e,t,i){let s=void 0===i?[]:i,r=Object.keys(this._HashMap);for(let e=0;e<r.length;e++){let i=this._HashMap[r[e]];t(i.Datum,i.Hash,i)&&s.push(this.expire(r[e]))}e(s)}prune(e){let t=[];if(this._List.length<1)return e(t);this.pruneBasedOnExpiration((i=>{this.pruneBasedOnLength(e,t)}),t)}getNode(e){return!!this._HashMap.hasOwnProperty(e)&&this._HashMap[e]}}},{"./LinkedList.js":5,"fable-serviceproviderbase":2}],4:[function(e,t,i){t.exports=class{constructor(){this.Hash=!1,this.Datum=!1,this.Metadata={},this.LeftNode=!1,this.RightNode=!1,this.__ISNODE=!0}}},{}],5:[function(e,t,i){const s=e("./LinkedList-Node.js");t.exports=class{constructor(){this.totalNodes=0,this.length=0,this.head=!1,this.tail=!1}initializeNode(e,t){if(void 0===e)return!1;this.totalNodes++;let i=void 0!==t?t:"NODE[".concat(this.totalNodes,"]"),r=new s;return r.Hash=i,r.Datum=e,r}append(e,t){let i=this.initializeNode(e,t);return!!i&&(this.length++,1==this.length?(this.head=i,this.tail=i,i):(this.tail.RightNode=i,i.LeftNode=this.tail,this.tail=i,i))}push(e,t){return this.append(e,t)}prepend(e,t){let i=this.initializeNode(e,t);return!!i&&(this.length++,1==this.length?(this.head=i,this.tail=i,i):(this.head.LeftNode=i,i.RightNode=this.head,this.head=i,i))}remove(e){return void 0!==e&&(!!e.__ISNODE&&(this.length--,this.length<1?(this.head=!1,this.tail=!1,e):e.LeftNode&&e.RightNode?(e.LeftNode.RightNode=e.RightNode,e.RightNode.LeftNode=e.LeftNode,e.RightNode=!1,e.LeftNode=!1,e):e.LeftNode?(e.LeftNode.RightNode=!1,this.tail=e.LeftNode,e.LeftNode=!1,e):(e.RightNode.LeftNode=!1,this.head=e.RightNode,e.RightNode=!1,e)))}pop(){return this.remove(this.head)}each(e,t){if(this.length<1)return t();let i=!1,s=r=>{if(r)return t(r);if(i){if(!i.RightNode)return t();i=i.RightNode}else i=this.head;e(i.Datum,i.Hash,s)};return s()}seek(e){if(!e)return!1;if(this.length<1)return!1;if(e>=this.length)return!1;let t=this.head;for(let i=0;i<e;i++)t=t.RightNode;return t}}},{"./LinkedList-Node.js":4}]},{},[3])(3)}));
//# sourceMappingURL=cachetrax.min.js.map
